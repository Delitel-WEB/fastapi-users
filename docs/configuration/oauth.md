# OAuth2

FastAPI Users –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ OAuth2. –û–Ω –∑–∞–≤–∏—Å–∏—Ç –æ—Ç [–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ OAuth HTTPX](https://frankie567.github.io/httpx-oauth/), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —á–∏—Å—Ç—É—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é OAuth2.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–í—ã –¥–æ–ª–∂–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –¥–ª—è OAuth:

```sh
pip install 'fastapi-users[sqlalchemy,oauth]'
```

–∏–ª–∏

```sh
pip install 'fastapi-users[beanie,oauth]'
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∏–µ–Ω—Ç–∞ OAuth2

–°–Ω–∞—á–∞–ª–∞ –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∏–µ–Ω—Ç–∞ HTTPX OAuth. [–ü—Ä–æ—á—Ç–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](https://frankie567.github.io/httpx-oauth/oauth2/) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

```py
from httpx_oauth.clients.google import GoogleOAuth2

google_oauth_client = GoogleOAuth2("CLIENT_ID", "CLIENT_SECRET")
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### SQLAlchemy

–í–∞–º –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–¥–µ–ª—å SQLAlchemy –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π OAuth. –ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –±–∞–∑–æ–≤—É—é –º–æ–¥–µ–ª—å –¥–ª—è —ç—Ç–æ–≥–æ:

```py hl_lines="5 19-20 24-26 43-44"
--8<-- "docs/src/db_sqlalchemy_oauth.py"
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã —Ç–∞–∫–∂–µ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–∏–ª–∏ `relationship` –Ω–∞ `User`, —á—Ç–æ–±—ã SQLAlchemy –º–æ–≥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ OAuth –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–¥–∞–ø—Ç–µ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —ç—Ç—É –º–æ–¥–µ–ª—å SQLAlchemy –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç—Ä–µ—Ç—å–µ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞.

!!! tip "–ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∫–∞–∫ UUID"
    –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º UUID –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ ID –¥–ª—è –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–∏–ø, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SQLAlchemyBaseOAuthAccountTable` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü `id` –∏ `user_id`.

    ```py
    class OAuthAccount(SQLAlchemyBaseOAuthAccountTable[int], Base):
        id: Mapped[int] = mapped_column(Integer, primary_key=True)

        @declared_attr
        def user_id(cls) -> Mapped[int]:
            return mapped_column(Integer, ForeignKey("user.id", ondelete="cascade"), nullable=False)

    ```

    –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `SQLAlchemyBaseOAuthAccountTable` –æ–∂–∏–¥–∞–µ—Ç –æ–±–æ–±—â–µ–Ω–Ω—ã–π —Ç–∏–ø –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–∏–ø–∞ ID, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ.

#### Beanie

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ MongoDB –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –≤—ã –ª–µ–≥–∫–æ –º–æ–∂–µ—Ç–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–¥–æ–±—ä–µ–∫—Ç—ã –≤ –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç. –ü–æ—ç—Ç–æ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Beanie –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–∞. –í—Å–µ, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, —ç—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ—â–µ –æ–¥–∏–Ω –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ OAuth.

```py hl_lines="5 15-16 20"
--8<-- "docs/src/db_beanie_oauth.py"
```

–°—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ `OAuthAccount` **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–º Beanie**, –∞ —è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–µ–ª—å—é Pydantic, –∫–æ—Ç–æ—Ä—É—é –º—ã –±—É–¥–µ–º –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç `User` —á–µ—Ä–µ–∑ –º–∞—Å—Å–∏–≤ `oauth_accounts`.

### –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `FastAPIUsers` –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç OAuth –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ **–∏** –±—ç–∫–µ–Ω–¥–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

```py
app.include_router(
    fastapi_users.get_oauth_router(google_oauth_client, auth_backend, "SECRET"),
    prefix="/auth/google",
    tags=["auth"],
)
```

!!! tip
    –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ OAuth –∏/–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±—ç–∫–µ–Ω–¥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.

#### –ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏

–ï—Å–ª–∏ —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å —Å —Ç–∞–∫–∏–º –∂–µ –∞–¥—Ä–µ—Å–æ–º —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ –æ—à–∏–±–∫–∞ HTTP 400.

–û–¥–Ω–∞–∫–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–∏–≤—è–∑–∫—É —ç—Ç–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ OAuth –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ —Ñ–ª–∞–≥ `associate_by_email`:

```py
app.include_router(
    fastapi_users.get_oauth_router(
        google_oauth_client,
        auth_backend,
        "SECRET",
        associate_by_email=True,
    ),
    prefix="/auth/google",
    tags=["auth"],
)
```

–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, —Å–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–∞—Ä—É—à–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä OAuth –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–¥—Ä–µ—Å–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã. –ö–∞–∫?

* –î–æ–ø—É—Å—Ç–∏–º, –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä *Merlinbook*, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–¥—Ä–µ—Å–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã.
* –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Å –∞–¥—Ä–µ—Å–æ–º —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã `lancelot@camelot.bt`.
* –¢–µ–ø–µ—Ä—å –∑–ª–æ–Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –≤ *Merlinbook* —Å —Ç–µ–º –∂–µ –∞–¥—Ä–µ—Å–æ–º —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã. –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã –∑–ª–æ–Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
* –ó–ª–æ–Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OAuth *Merlinbook* –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `lancelot@camelot.bt`.
* –¢–µ–ø–µ—Ä—å –∑–ª–æ–Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≤–∞—à

–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ üòû

#### –ú–∞—Ä—à—Ä—É—Ç –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ú—ã —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –º–∞—Ä—à—Ä—É—Ç –¥–ª—è –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏—è —É–∂–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é OAuth. –ü–æ—Å–ª–µ —ç—Ç–æ–π –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —ç—Ç–∏–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º OAuth.

```py
app.include_router(
    fastapi_users.get_oauth_associate_router(google_oauth_client, UserRead, "SECRET"),
    prefix="/auth/associate/google",
    tags=["auth"],
)
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ, –∫–∞–∫ –∏ –¥–ª—è [–º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π](./routers/users.md), –≤—ã –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Å—Ö–µ–º—É Pydantic `UserRead`.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `is_verified` –≤ `True` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

!!! tip "–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –ø–æ–ª–µ–∑–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã"
    –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –±–æ–ª—å—à–µ –æ–± —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ [–∑–¥–µ—Å—å](./routers/verify.md).

–ö–æ–≥–¥–∞ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º OAuth, —Ñ–ª–∞–≥ `is_verified` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `False`, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–≤–æ–µ–≥–æ –∞–¥—Ä–µ—Å–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã.

–í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥–æ–≤–µ—Ä—è—Ç—å –∞–¥—Ä–µ—Å—É —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º OAuth, –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–ª–∞–≥ `is_verified` –≤ `True` –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –í—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç `is_verified_by_default`:

```py
app.include_router(
    fastapi_users.get_oauth_router(
        google_oauth_client,
        auth_backend,
        "SECRET",
        is_verified_by_default=True,
    ),
    prefix="/auth/google",
    tags=["auth"],
)
```

!!! danger "–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–≤–µ—Ä—è—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É OAuth"
    –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤–∞–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä OAuth **–ø—Ä–æ–≤–µ—Ä—è–µ—Ç** –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã, –ø—Ä–µ–∂–¥–µ —á–µ–º –≤–∫–ª—é—á–∞—Ç—å —ç—Ç–æ—Ç —Ñ–ª–∞–≥.

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä

!!! warning
    –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ **SECRET** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ –Ω–∞–¥–µ–∂–Ω—É—é –ø–∞—Ä–æ–ª—å. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –º–æ–≥—É—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

#### SQLAlchemy

[–û—Ç–∫—Ä—ã—Ç—å :material-open-in-new:](https://github.com/fastapi-users/fastapi-users/tree/master/examples/sqlalchemy-oauth)

=== "requirements.txt"

    ```
    --8<-- "examples/sqlalchemy-oauth/requirements.txt"
    ```

=== "main.py"

    ```py
    --8<-- "examples/sqlalchemy-oauth/main.py"
    ```

=== "app/app.py"

    ```py
    --8<-- "examples/sqlalchemy-oauth/app/app.py"
    ```

=== "app/db.py"

    ```py
    --8<-- "examples/sqlalchemy-oauth/app/db.py"
    ```

=== "app/schemas.py"

    ```py
    --8<-- "examples/sqlalchemy-oauth/app/schemas.py"
    ```

=== "app/users.py"

    ```py
    --8<-- "examples/sqlalchemy-oauth/app/users.py"
    ```

#### Beanie

[–û—Ç–∫—Ä—ã—Ç—å :material-open-in-new:](https://github.com/fastapi-users/fastapi-users/tree/master/examples/beanie-oauth)

=== "requirements.txt"

    ```
    --8<-- "examples/beanie-oauth/requirements.txt"
    ```

=== "main.py"

    ```py
    --8<-- "examples/beanie-oauth/main.py"
    ```

=== "app/app.py"

    ```py
    --8<-- "examples/beanie-oauth/app/app.py"
    ```

=== "app/db.py"

    ```py
    --8<-- "examples/beanie-oauth/app/db.py"
    ```

=== "app/schemas.py"

    ```py
    --8<-- "examples/beanie-oauth/app/schemas.py"
    ```

=== "app/users.py"

    ```py
    --8<-- "examples/beanie-oauth/app/users.py"
    ```