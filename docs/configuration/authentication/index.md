# Аутентификация

**FastAPI Users** позволяет подключать несколько методов аутентификации.

## Как это работает?

У вас может быть **несколько** методов аутентификации, например, аутентификация по куки для запросов на основе браузера и аутентификация по токену JWT для чистых запросов API.

При проверке аутентификации каждый метод выполняется один за другим. Первый метод, возвращающий пользователя, выигрывает. Если ни один метод не возвращает пользователя, возникает `HTTPException`.

Для каждого бэкенда вы сможете добавить маршрутизатор с соответствующими `/login` и `/logout`. Больше об этом в [документации по роутерам](../routers/index.md).

## Транспорт + Стратегия = Бэкенд аутентификации

Бэкенд аутентификации состоит из двух частей:

### Транспорт

Он управляет тем, как токен будет передаваться в запросе. В настоящее время мы предоставляем два метода:

#### [Bearer](transports/bearer.md)

Токен будет отправлен через заголовок `Authorization: Bearer`.

!!! tip "За и против"

    * ✅ Легко читать и устанавливать в каждом запросе.
    * ❌ Необходимо вручную сохранять где-то на клиенте.

    ➡️ Используйте, если вы хотите реализовать мобильное приложение или чистый REST API.

#### [Cookie](transports/cookie.md)

Токен будет отправлен через куки.

!!! tip "За и против"

    * ✅ Автоматически сохраняется и отправляется безопасно в каждом запросе веб-браузером.
    * ✅ Автоматически удаляется при истечении срока действия веб-браузерами.
    * ❌ Необходима защита от CSRF для максимальной безопасности.
    * ❌ Труднее работать вне браузера, например, в мобильном приложении или на сервере.

    ➡️ Используйте, если вы хотите реализовать веб-интерфейс.

### Стратегия

Он управляет тем, как токен генерируется и защищается. В настоящее время мы предоставляем три метода:

#### [JWT](strategies/jwt.md)

Токен содержится в JSON Web Token.

!!! tip "За и против"

    * ✅ Самодостаточный: его не нужно хранить в базе данных.
    * ❌ Не может быть аннулирован на стороне сервера: он действителен до истечения срока действия.

    ➡️ Используйте, если вы хотите быстро запуститься.

#### [Database](strategies/database.md)

Токен хранится в таблице (или коллекции) вашей базы данных.

!!! tip "За и против"

    * ✅ Безопасно и производительно.
    * ✅ Токены могут быть аннулированы на стороне сервера путем их удаления из базы данных.
    * ✅ Высокая настраиваемость: добавляйте свои собственные поля, создавайте API для получения активных сеансов ваших пользователей и т. д.
    * ❌ Настройка сложнее.

    ➡️ Используйте, если вы хотите максимальную гибкость в управлении токенами.

#### [Redis](strategies/redis.md)

Токен хранится в хранилище ключей Redis.

!!! tip "За и против"

   

 * ✅ Безопасно и производительно.
    * ✅ Токены могут быть аннулированы на стороне сервера путем их удаления из Redis.
    * ❌ Необходим сервер Redis.

    ➡️ Используйте, если вы хотите максимальную производительность и возможность аннулирования токенов.