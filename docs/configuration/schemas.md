# Схемы

FastAPI широко использует [модели Pydantic](https://pydantic-docs.helpmanual.io/) для проверки данных запросов и сериализации ответов. **FastAPI Users** не является исключением и ожидает, что вы предоставите модели Pydantic, представляющие пользователя при его чтении, создании и обновлении.

Это **отличается от вашей модели `User`**, которая представляет собой объект, который фактически взаимодействует с базой данных. Эти схемы, с другой стороны, предназначены для проверки данных и их правильной сериализации в API.

**FastAPI Users** предоставляет базовую структуру для удовлетворения своих потребностей. Она структурирована следующим образом:

* `id` (`ID`) – Уникальный идентификатор пользователя. Он соответствует типу вашего ID, такому как UUID или целое число.
* `email` (`str`) – Email пользователя. Проверяется с использованием [`email-validator`](https://github.com/JoshData/python-email-validator).
* `is_active` (`bool`) – Активен ли пользователь или нет. Если нет, запросы на вход и сброс пароля будут отклонены. По умолчанию установлено значение `True`.
* `is_verified` (`bool`) – Подтвержден ли пользователь или нет. Необязательное поле, но полезно с логикой [`verify` маршрута](./routers/verify.md). По умолчанию установлено значение `False`.
* `is_superuser` (`bool`) – Является ли пользователь суперпользователем или нет. Полезно для реализации административной логики. По умолчанию установлено значение `False`.

## Определение ваших схем

Предоставляются четыре вариации моделей Pydantic в качестве миксинов:

* `BaseUser`, который предоставляет основные поля и валидацию;
* `BaseCreateUser`, предназначен для регистрации пользователя, состоит из обязательных полей `email` и `password`;
* `BaseUpdateUser`, предназначен для обновления профиля пользователя, добавляет необязательное поле `password`;

Вы должны определить каждую из этих вариаций, наследуясь от каждого миксина:

```py
import uuid

from fastapi_users import schemas


class UserRead(schemas.BaseUser[uuid.UUID]):
    pass


class UserCreate(schemas.BaseUserCreate):
    pass


class UserUpdate(schemas.BaseUserUpdate):
    pass
```

!!! note "Типизация: Ожидается обобщенный тип ID"
    Вы видите, что мы определяем обобщенный тип при расширении класса `BaseUser`. Он должен соответствовать типу ID, который вы используете в своей модели. Здесь мы выбрали UUID, но это может быть что угодно, например, целое число или MongoDB ObjectID.

### Добавление своих собственных полей

Вы, конечно, можете добавить свои собственные свойства, чтобы соответствовать вашим потребностям. В приведенном ниже примере мы добавляем обязательное строковое свойство `first_name` и необязательное свойство даты `birthdate`.

```py
import datetime
import uuid

from fastapi_users import schemas


class UserRead(schemas.BaseUser[uuid.UUID]):
    first_name: str
    birthdate: Optional[datetime.date]


class UserCreate(schemas.BaseUserCreate):
    first_name: str
    birthdate: Optional[datetime.date]


class UserUpdate(schemas.BaseUserUpdate):
    first_name: Optional[str]
    birthdate: Optional[datetime.date]
```

!!! warning "Убедитесь, что вы отражаете это в своей модели базы данных"
    Модель `User`, которую вы определили ранее для вашей конкретной базы данных, будет центральным объектом, который фактически хранит данные. Поэтому вам нужно определить те же самые поля в ней, чтобы данные могли действительно сохраняться.